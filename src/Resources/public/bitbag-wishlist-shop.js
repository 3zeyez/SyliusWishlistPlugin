(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function n(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function(){function e(){var t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),r(this,"_connectListeners",(function(){t.checkboxes.forEach((function(e){e.addEventListener("change",(function(e){t._handleCheckboxes()}))})),t.mainCheckbox.addEventListener("change",(function(e){t._handleMainCheckboxToggle()}))})),this.config=o,this.defaultConfig={mainCheckboxId:"#toggle-checkboxes",checkboxesData:"[data-bb-checkboxes] input",bulkActionsBtnClass:".bb-colective-actions"},this.finalConfig=n(n({},this.defaultConfig),o),this.mainCheckbox=document.querySelector(this.finalConfig.mainCheckboxId),this.checkboxes=Array.prototype.slice.call(document.querySelectorAll(this.finalConfig.checkboxesData))}var a,s,c;return a=e,(s=[{key:"init",value:function(){if(this.config&&"object"!==t(this.config))throw new Error("BitBag - WishlistMainCheckboxUpdater - given config is not valid - expected object");this._connectListeners()}},{key:"_toggleCheckboxesON",value:function(){for(var t=0;t<this.checkboxes.length;t++)this.checkboxes[t].checked=!0}},{key:"_toggleCheckboxesOFF",value:function(){for(var t=0;t<this.checkboxes.length;t++)this.checkboxes[t].checked=!1}},{key:"_checkCheckboxes",value:function(){var t=!0;return this.checkboxes.forEach((function(e){1==e.checked&&(t=!1)})),t}},{key:"_handleCheckboxes",value:function(){this._checkCheckboxes()?(this.mainCheckbox.checked=!1,this._disableBulkActionsBtn()):(this.mainCheckbox.checked=!0,this._enableBulkActionsBtn())}},{key:"_handleMainCheckboxToggle",value:function(){if(1!=this.mainCheckbox.checked)return this._toggleCheckboxesOFF(),void this._disableBulkActionsBtn();this._toggleCheckboxesON(),this._enableBulkActionsBtn()}},{key:"_enableBulkActionsBtn",value:function(){var t=document.querySelector(this.finalConfig.bulkActionsBtnClass);t.classList.remove("disabled"),t.classList.add("enabled")}},{key:"_disableBulkActionsBtn",value:function(){var t=document.querySelector(this.finalConfig.bulkActionsBtnClass);t.classList.remove("enabled"),t.classList.add("disabled")}}])&&o(a.prototype,s),c&&o(a,c),e}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}document.querySelector("#toggle-checkboxes")&&(new a).init();var b=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{performAction:function(){},cancelAction:function(){}};h(this,t),this.config=e,this.defaultConfig={headerTitle:"Choose a wishlist to which selected items should be copied",cancelText:"cancel",performText:"perform",datasetWishlistTargets:"[data-bb-wishlists]",datasetWishlistTargetsId:"[data-bb-wishlists-id]",datasetWishlistCurrentId:"[data-bb-current-wishlist-id]",confirmationModalClass:"copy-confirmation-modal",confirmationModalheaderClass:"copy-confirmation-modal__header",confirmationModalH2Class:"copy-confirmation-modal__header--title",confirmationModalBodyClass:"copy-confirmation-modal__body",confirmationModalBodyItemClass:"copy-confirmation-modal__body--item",confirmationModalConfirmClass:"copy-confirmation-modal__confirm",confirmationModalCancelBtnClass:"copy-confirmation-modal__confirm--cancel",confirmationModalConfirmBtnClass:"copy-confirmation-modal__confirm--perform"},this.actions=n,this.finalConfig=f(f({},this.defaultConfig),e),this.wishlistTargets=c(document.querySelectorAll(this.finalConfig.datasetWishlistTargets)),this.wishlistTargetsId=c(document.querySelectorAll(this.finalConfig.datasetWishlistTargetsId)),this.wishlistcurrent=document.querySelector(this.finalConfig.datasetWishlistCurrentId).dataset.bbCurrentWishlistId,this.copyTarget}var e,n,i;return e=t,(n=[{key:"init",value:function(){if(this.config&&"object"!==s(this.config))throw new Error("BitBag - CreateCopyToWishlistsListModal - given config is not valid - expected object");this._renderModal()}},{key:"_renderModal",value:function(){this.modal=this._modalTemplate(),this.modal.classList.add("bitbag","copy-modal-initialization"),this._modalActions(this.modal),document.querySelector("body").appendChild(this.modal),this.modal.classList.remove("copy-modal-initialization"),this.modal.classList.add("copy-modal-initialized")}},{key:"_modalTemplate",value:function(){var t=document.createElement("div");return t.innerHTML="    \n        <form class=".concat(this.finalConfig.confirmationModalClass,">\n            <header class=").concat(this.finalConfig.confirmationModalheaderClass,">\n                <h2 class=").concat(this.finalConfig.confirmationModalH2Class,">\n                    ").concat(this.finalConfig.headerTitle,'\n                </h2>\n            </header>\n            <section data-bb-target="wishlists" class=').concat(this.finalConfig.confirmationModalBodyClass,">\n                    \n            </section>\n            <section class=").concat(this.finalConfig.confirmationModalConfirmClass,'>\n                <button type="button" data-bb-action="cancel" class=').concat(this.finalConfig.confirmationModalCancelBtnClass,">\n                    ").concat(this.finalConfig.cancelText,'\n                </button>\n                <button type="button" data-bb-action="perform" class=').concat(this.finalConfig.confirmationModalConfirmBtnClass,">\n                    ").concat(this.finalConfig.performText,"\n                </button>\n            </section>\n        </form>\n        "),t.querySelector('[data-bb-target="wishlists"]').appendChild(this._getWishlists()),t}},{key:"_wishlistTemplate",value:function(t){return'    \n            <option value="'.concat(t.dataset.bbWishlistsId,'" data-bb-wishlist-id="').concat(t.dataset.bbWishlistsId,'">\n                ').concat(t.dataset.bbWishlists,"\n            </option>\n        ")}},{key:"_getWishlists",value:function(){var t=this,e=document.createElement("select");return e.name="wishlist",e.classList.add("ui","selection","dropdown"),e.insertAdjacentHTML("beforeend","<option selected disabled>My Wishlistâ€¦</option>"),this.wishlistTargets.forEach((function(n){e.insertAdjacentHTML("beforeend",t._wishlistTemplate(n))})),e}},{key:"_matchWishlists",value:function(t){var e=this;this.wishlistTargetsId.forEach((function(n){n.dataset.bbWishlists==t.value&&(e.copyTarget=n.dataset.bbWishlistsId)}))}},{key:"_modalActions",value:function(t){var e=this,n=t.querySelector('[data-bb-action="cancel"]'),i=t.querySelector('[data-bb-action="perform"]');n.addEventListener("click",(function(t){t.preventDefault(),e.actions.cancelAction(),e._closeModal()})),i.addEventListener("click",(function(t){t.preventDefault(),e._matchWishlists(document.querySelector("[data-bb-target] select")),e.actions.performAction(e.wishlistcurrent,e.copyTarget),e._closeModal()}))}},{key:"_closeModal",value:function(){this.modal.remove()}}])&&m(e.prototype,n),i&&m(e,i),t}();function p(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,o)}var y=document.querySelector('[data-bb-wl-list-modal-target="choose-wishlist-button"]'),v=function(){y.addEventListener("click",(function(t){var e,n;t.preventDefault(),new b({},{cancelAction:function(){},performAction:(e=regeneratorRuntime.mark((function t(){var e,n,i,o,r,a,s,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=document.querySelector("#wishlist_form"),n=new FormData(e),i=document.querySelector("[data-bb-wishlist-enter]"),o=document.querySelector(".copy-confirmation-modal select").value,r="".concat(window.location.href,"/copy/").concat(o),a=document.querySelector("[data-bb-csrf]").dataset.bbCsrf,s=new Headers({"X-CSRF-TOKEN":a}),c={method:"POST",headers:s,body:n},t.prev=8,t.next=11,fetch(r,c);case 11:return l=t.sent,t.next=14,l.json();case 14:t.sent,i.classList.add("bb-copy-to-wishlist-sukces"),setTimeout((function(){i.classList.remove("bb-copy-to-wishlist-sukces")}),900),t.next=24;break;case 19:t.prev=19,t.t0=t.catch(8),i.classList.add("bb-copy-to-wishlist-faliure"),setTimeout((function(){i.classList.remove("bb-copy-to-wishlist-faliure")}),900),console.error(t.t0);case 24:return t.prev=24,location.reload(),t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[8,19,24,27]])})),n=function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function a(t){p(r,i,o,a,s,"next",t)}function s(t){p(r,i,o,a,s,"throw",t)}a(void 0)}))},function(){return n.apply(this,arguments)})}).init()}))};function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){k(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}y&&v();var O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{performAction:function(){},cancelAction:function(){}};_(this,t),this.config=e,this.defaultConfig={headerTitle:"Modal title",cancelText:"cancel",performText:"perform",wishlistBodyContent:"Modal body",wishlistFormName:"wishlist",datasetWishlistTargets:"[data-bb-wishlists]",wishlistModalClass:"wishlist-confirmation-modal",wishlistheaderClass:"wishlist-confirmation-modal__header",wishlistH2Class:"wishlist-confirmation-modal__header--title",wishlistBodyClass:"wishlist-confirmation-modal__body",wishlistBodyItemClass:"wishlist-confirmation-modal__body--input",wishlistConfirmClass:"wishlist-confirmation-modal__confirm",wishlistCancelBtnClass:"wishlist-confirmation-modal__confirm--cancel",wishlistConfirmBtnClass:"wishlist-confirmation-modal__confirm--perform"},this.actions=n,this.finalConfig=C(C({},this.defaultConfig),e)}var e,n,i;return e=t,(n=[{key:"init",value:function(){if(this.config&&"object"!==g(this.config))throw new Error("BitBag - WishlistsListModal - given config is not valid - expected object");this._renderModal()}},{key:"_renderModal",value:function(){this.modal=this._modalTemplate(),this.modal.classList.add("bitbag","wishlist-modal-initialization"),this._modalActions(this.modal),document.querySelector("body").appendChild(this.modal),this.modal.classList.remove("wishlist-modal-initialization"),this.modal.classList.add("wishlist-modal-initialized")}},{key:"_modalTemplate",value:function(){var t=document.createElement("div");return t.innerHTML='    \n            <form name="'.concat(this.finalConfig.wishlistFormName,'_save" id="').concat(this.finalConfig.wishlistFormName,'" method="post" class=').concat(this.finalConfig.wishlistModalClass,">\n                <header class=").concat(this.finalConfig.wishlistheaderClass,">\n                    <h2 class=").concat(this.finalConfig.wishlistH2Class,">\n                        ").concat(this.finalConfig.headerTitle,'\n                    </h2>\n                </header>\n                <section data-bb-target="wishlists" class=').concat(this.finalConfig.wishlistBodyClass,">\n                    ").concat(this.finalConfig.wishlistBodyContent,"\n                </section>\n                <section class=").concat(this.finalConfig.wishlistConfirmClass,'>\n                    <button type="button" data-bb-action="cancel" class=').concat(this.finalConfig.wishlistCancelBtnClass,">\n                        ").concat(this.finalConfig.cancelText,'\n                    </button>\n                    <button type="button" data-bb-action="perform" id="').concat(this.finalConfig.wishlistFormName,'_save" class=').concat(this.finalConfig.wishlistConfirmBtnClass,">\n                        ").concat(this.finalConfig.performText,"\n                    </button>\n                </section>\n            </form>\n        "),t}},{key:"_modalActions",value:function(t){var e=this,n=t.querySelector('[data-bb-action="cancel"]'),i=t.querySelector('[data-bb-action="perform"]');n.addEventListener("click",(function(){e.actions.cancelAction(),e._closeModal()})),i.addEventListener("click",(function(){e._isInputValid(t)?e._triggerInputError(t):(e.actions.performAction(),e._closeModal())}))}},{key:"_isInputValid",value:function(t){var e=t.querySelector('[data-bb-target="wishlists"] > [data-bb-target="input"]');return e&&(null===e.value||null!==e.value.match(/^ *$|^\t*$/))}},{key:"_triggerInputError",value:function(t){var e=t.querySelector('[data-bb-target="wishlists"]'),n=e.querySelector('[data-bb-target="input"]'),i=e.querySelector('[data-bb-target="error"]');n.classList.add("error"),i.classList.remove("hidden"),n.value=""}},{key:"_closeModal",value:function(){this.modal.remove()}}])&&S(e.prototype,n),i&&S(e,i),t}();function x(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,o)}var T=document.querySelector('[data-bb-wishlist-add="add-another-wishlist"]'),j="create_new_wishlist",P=function(){T.addEventListener("click",(function(){var t,e;new O({headerTitle:"Choose name for your new wishlist",wishlistFormName:j,wishlistBodyContent:'\n                    <input type="text" id="'.concat(j,'_name" name="').concat(j,'[name]" required="required" class="wishlist-confirmation-modal__body--input" data-bb-target="input">\n                    <div class="ui red pointing label validation-error hidden" data-bb-target="error">Please enter wishlist name.</div>\n                ')},{cancelAction:function(){},performAction:(t=regeneratorRuntime.mark((function t(){var e,n,i,o,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=document.querySelector("#".concat(j))).querySelector("#".concat(j,"_name")),n=new FormData(e),i=document.querySelector("[data-bb-csrf]").dataset.bbCsrf,o=new Headers({"X-CSRF-TOKEN":i}),r={method:"POST",headers:o,body:n},t.prev=7,t.next=10,fetch("/wishlists/create",r);case 10:return a=t.sent,t.next=13,a.json();case 13:t.sent,t.next=19;break;case 16:t.prev=16,t.t0=t.catch(7),console.error(t.t0);case 19:return t.prev=19,location.reload(),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[7,16,19,22]])})),e=function(){var e=this,n=arguments;return new Promise((function(i,o){var r=t.apply(e,n);function a(t){x(r,i,o,a,s,"next",t)}function s(t){x(r,i,o,a,s,"throw",t)}a(void 0)}))},function(){return e.apply(this,arguments)})}).init()}))};function A(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,o)}T&&P();var E=document.querySelectorAll("[data-wishlist-remove-id]"),q="remove_wishlist",M=function(){E.forEach((function(t){t.addEventListener("click",(function(){var e,n;new O({headerTitle:"Remove wishlist",wishlistFormName:q,wishlistBodyContent:"Are you sure?"},{cancelAction:function(){},performAction:(e=regeneratorRuntime.mark((function e(){var n,i,o,r,a,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.querySelector("#".concat(q)),i=t.dataset.wishlistRemoveId,o="/wishlists/".concat(i,"/remove"),r=new FormData(n),a=document.querySelector("[data-bb-csrf]").dataset.bbCsrf,s=new Headers({"X-CSRF-TOKEN":a}),c={method:"POST",headers:s,body:r},e.prev=7,e.next=10,fetch(o,c);case 10:return l=e.sent,e.next=13,l.json();case 13:e.sent,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),console.error(e.t0);case 19:return e.prev=19,location.reload(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[7,16,19,22]])})),n=function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function a(t){A(r,i,o,a,s,"next",t)}function s(t){A(r,i,o,a,s,"throw",t)}a(void 0)}))},function(){return n.apply(this,arguments)})}).init()}))}))};function B(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,o)}E&&M();var L=document.querySelectorAll("[data-wishlist-edit-id]"),W="edit_wishlist",I=function(){L.forEach((function(t){t.addEventListener("click",(function(){var e,n;new O({headerTitle:"Choose new name for your wishlist",wishlistFormName:W,wishlistBodyContent:'\n                        <input type="text" id="'.concat(W,'_name" name="').concat(W,'_name[name]" required="required" class="wishlist-confirmation-modal__body--input" data-bb-target="input">\n                        <div class="ui red pointing label validation-error hidden" data-bb-target="error">Please enter wishlist name.</div>\n                    ')},{cancelAction:function(){},performAction:(e=regeneratorRuntime.mark((function e(){var n,i,o,r,a,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=document.querySelector("#".concat(W))).querySelector("#".concat(W,"_name")),i=t.dataset.wishlistEditId,o="/wishlists/".concat(i,"/edit"),r=new FormData(n),a=document.querySelector("[data-bb-csrf]").dataset.bbCsrf,s=new Headers({"X-CSRF-TOKEN":a}),c={method:"POST",headers:s,body:r},e.prev=8,e.next=11,fetch(o,c);case 11:return l=e.sent,e.next=14,l.json();case 14:e.sent,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),console.error(e.t0);case 20:return e.prev=20,location.reload(),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[8,17,20,23]])})),n=function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function a(t){B(r,i,o,a,s,"next",t)}function s(t){B(r,i,o,a,s,"throw",t)}a(void 0)}))},function(){return n.apply(this,arguments)})}).init()}))}))};function D(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,o)}function F(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var r=t.apply(e,n);function a(t){D(r,i,o,a,s,"next",t)}function s(t){D(r,i,o,a,s,"throw",t)}a(void 0)}))}}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}L&&I();var H={form:"#sylius-product-adding-to-cart"},V=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(R(this,t),null==e||!e.nodeType)throw new Error("The first parameter must be a NodeElement");var i=n.selectors;this.node=e,this.selectors=Object.assign({},H,i)}var e,n,i,o,r;return e=t,n=[{key:"init",value:function(){var t=this;this.node.addEventListener("click",(function(e){return t._addVariantToWishlist(e)}))}},{key:"_addVariantToWishlist",value:(r=F(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,this._getWishlistVariantUri();case 3:n=t.sent,this._redirectToWishlist(n);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"_getWishlistVariantUri",value:(o=F(regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=document.querySelector(this.selectors.form),(n=new FormData(e)).append(this.node.name,""),t.next=6,fetch(e.action,{method:"POST",body:n});case 6:return i=t.sent,t.next=9,i.text();case 9:return t.abrupt("return",t.sent);case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,12]])}))),function(){return o.apply(this,arguments)})},{key:"_redirectToWishlist",value:function(t){location.href=t}}],n&&N(e.prototype,n),i&&N(e,i),t}();function z(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var U=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),null==e||!e.nodeType)throw new Error("The first parameter must be a NodeElement");this.item=document.querySelector(e.dataset.bbTarget),this.nodePrice=e,this.pricing=JSON.parse(e.dataset.bbPricing||""),this.selectors=this.item.querySelectorAll("select[data-name]"),this.selectedVariant={}}var e,n,i;return e=t,(n=[{key:"init",value:function(){var t=this;this.selectors.forEach((function(e){t._updateSelectedVariant(e),t.selectedVariant[e.dataset.name]=e.value,e.addEventListener("change",t._onChangeSelector.bind(t))})),this.nodePrice.removeAttribute("data-bb-pricing"),this._updatePrice()}},{key:"_onChangeSelector",value:function(t){this._updateSelectedVariant(t.currentTarget)}},{key:"_updateSelectedVariant",value:function(t){this.selectedVariant[t.dataset.name]=t.value,this._updatePrice()}},{key:"_updatePrice",value:function(){var t=this,e=this.pricing.find((function(e){return n=e,i=t.selectedVariant,Object.keys(i).every((function(t){return n.hasOwnProperty(t)&&n[t]===i[t]}));var n,i}));this.nodePrice.innerHTML=e.value}}])&&z(e.prototype,n),i&&z(e,i),t}();function K(t){return function(t){if(Array.isArray(t))return X(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return X(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}K(document.querySelectorAll('[data-bb-toggle="wishlist-variant"]')).map((function(t){return new V(t).init()})),K(document.querySelectorAll('[data-bb-toggle="wishlist-variant-price"]')).map((function(t){return new U(t).init()}))})();